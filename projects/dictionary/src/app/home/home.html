<div class="h-full bg-white text-black dark:text-white dark:bg-black"
     [class.font-inter]="fontForm.value.font === 'sans serif'"
     [class.font-lora]="fontForm.value.font === 'serif'"
     [class.font-inconsolata]="fontForm.value.font === 'mono'">
  <header class="p-4">
    <div class="flex items-center justify-between">
      <div class="flex items-center align-middle">
        <img ngSrc="assets/images/logo.svg" alt="logo" height="38" width="34" priority>
      </div>
      <div class="flex">

        <!-- Font Dropdown -->
        <div #dropdown class="relative h-8 w-28 select-none px-3 text-sm font-bold text-d-slate-500 dark:text-white text-nowrap hover:cursor-pointer"
             (click)="toggleDropdown()">
          <form class="flex h-full flex-col items-end justify-center align-middle" [formGroup]="fontForm">
            <label class="select-none pr-5 hover:cursor-pointer">{{ fontForm.value.font | titlecase }}</label>

            <div class="absolute top-10 right-1">
              <div class="absolute -inset-1 z-10 rounded-xl bg-black opacity-10 blur dark:opacity-75 dark:bg-d-purple">
              </div>
              <div class="relative z-10 flex flex-col gap-4 rounded-xl bg-white py-4 pr-12 pl-6 dark:bg-d-slate-400"
                   [class.hidden]="!isDropdownVisible()">
                <input type="radio"
                       class="hidden"
                       formControlName="font"
                       id="sans-serif"
                       value="sans serif">
                <label class="font-inter hover:text-d-purple hover:cursor-pointer"
                       (click)="toggleDropdown()"
                       for="sans-serif">Sans Serif</label>

                <input type="radio"
                       class="hidden"
                       formControlName="font"
                       id="serif"
                       value="serif">
                <label class="font-lora hover:text-d-purple hover:cursor-pointer"
                       (click)="toggleDropdown()"
                       for="serif">Serif</label>

                <input type="radio"
                       class="hidden"
                       formControlName="font"
                       id="mono"
                       value="mono">
                <label class="font-inconsolata hover:text-d-purple hover:cursor-pointer"
                       (click)="toggleDropdown()"
                       for="mono">Mono</label>
              </div>
            </div>
          </form>
          <div class="absolute top-1/2 right-2 -translate-y-1/2 transform">
            <img ngSrc="assets/images/icon-arrow-down.svg" alt="arrow down" height="8" width="14">
          </div>
        </div>

        <div class="mr-6 ml-3 border-1 text-d-slate-200"></div>

        <!-- Dark Mode Toggle -->
        <div #darkModeToggle class="flex items-center gap-4 hover:cursor-pointer"
             (click)="toggleDarkMode()">
          <div class="relative h-4 w-8 rounded-full"
               [class]="isDarkMode() ? 'bg-d-purple' : 'bg-d-slate-300'">
            <input #toggleInput class="hidden" type="checkbox" [checked]="isDarkMode()" (change)="isDarkMode.set(toggleInput.checked)">
            <div class="absolute top-1/2 {{ isDarkMode() ? 'left-4' : 'left-1' }} -translate-y-1/2 transform rounded-full bg-white w-3 h-3 transition-all ease-in-out"></div>
          </div>
          <svg [class]="isDarkMode() ? 'stroke-d-purple' : 'stroke-d-slate-300'"
               xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 22 22">
            <path fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M1 10.449a10.544 10.544 0 0 0 19.993 4.686C11.544 15.135 6.858 10.448 6.858 1A10.545 10.545 0 0 0 1 10.449Z"/>
          </svg>
        </div>
      </div>
    </div>
  </header>

  <div class="mx-4 flex flex-col">
    <div class="relative hover:cursor-pointer">
      <form [formGroup]="searchForm" (ngSubmit)="search(); submittedOnce.set(true)">
        <input id="searchbar"
               type="text"
               class="w-full rounded-xl py-2 pr-10 pl-5 text-lg font-bold text-black outline-none dark:text-white border-1 bg-d-slate-100 dark:bg-d-slate-400 placeholder-d-slate-200 dark:placeholder-d-slate-300 focus:border-d-purple"
               [ngClass]="{
             'border border-d-red': isSearchbarInvalid(),
             'border border-d-slate-100 dark:border-d-slate-400': !isSearchbarInvalid()
             }"
               formControlName="searchbar"
               placeholder="Search for any word..."
               (keyup.esc)="resetSearchbar()">
      </form>
      <img ngSrc="assets/images/icon-search.svg" alt="search icon" height="16" width="16" class="absolute top-1/2 right-5 -translate-y-1/2 transform">
    </div>
    <span class="m-1 text-sm transition-opacity duration-200 text-d-red"
          [class.opacity-0]="!isSearchbarInvalid()"
          [class.opacity-100]="isSearchbarInvalid()">Whoops, can't be empty...</span>
  </div>
  {{ this.searchbar?.valid }} {{ this.searchbar?.dirty }} {{ this.searchbar?.valid }} {{ this.searchbar?.errors | json }}

  <svg xmlns="http://www.w3.org/2000/svg" width="75" height="75" viewBox="0 0 75 75" class="group hover:cursor-pointer">
    <g class="fill-d-purple" fill-rule="evenodd">
      <circle cx="37.5" cy="37.5" r="37.5" class="opacity-25 group-hover:opacity-100"/>
      <path d="M29 27v21l21-10.5z" class="group-hover:fill-white"/>
    </g>
  </svg>

</div>
